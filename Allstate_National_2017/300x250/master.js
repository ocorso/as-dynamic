/**
 * Dynamic Content Enable code for Profile: 1103547
 *
 * The following code initializes the following dynamic variables for
 * development testing and live serving of Fields associated to the above profile
-->

<!-- DynamicContent Start: HTML5 invocation code. -->
*/

// Dynamic Content variables and sample values
    Enabler.setProfileId(1103547);
    var devDynamicContent = {};


    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed= [{}];
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0]._id = 0;
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].ID = 1;
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Variation = "A1";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Reporting_Label = "A1";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Is_Default = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Exit_URL = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Exit_URL.Url = "http://allstate.com";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].elemType = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Savings_Percentage = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Market_Name = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Legal_Copy = "this is test legal copy";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Background_CSS_Class = "bgTeal";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Logo = "auto";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_Copy = "taking safe<br>driving<br>seriously";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_300x250_Copy_CSS_Class = "txtWhite mediumFont shadow bottom right";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_300x600_Copy_CSS_Class = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_160x600_Copy_CSS_Class = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_728x90_Copy_CSS_Class = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_SplitText_Target1 = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_SplitText_Action1 = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_SplitText_Target2 = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_SplitText_Action2 = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_Image_300x250 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_Image_300x250.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_Image_300x250.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170104122212510_A1_300x250_image1.jpg";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_Image_300x600 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_Image_300x600.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_Image_300x600.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170110080031205_A1_300x600_image1.jpg";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_Image_160x600 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_Image_160x600.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_Image_160x600.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170110080021782_A1_160x600_image1.jpg";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_Image_728x90 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_Image_728x90.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame1_Image_728x90.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170110080039673_A1_728x90_image1.jpg";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_Copy = "means<br>earning<br>serious<br>rewards";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_300x250_Copy_CSS_Class = "txtWhite mediumFont shadow bottom right";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_300x600_Copy_CSS_Class = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_160x600_Copy_CSS_Class = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_728x90_Copy_CSS_Class = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_SplitText_Target1 = "#frame2 .chars10, #frame2 .chars11";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_SplitText_Action1 = "txtTeal";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_SplitText_Target2 = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_SplitText_Action2 = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_Image_300x250 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_Image_300x250.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_Image_300x250.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170104122216812_A1_300x250_image2.jpg";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_Image_300x600 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_Image_300x600.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_Image_300x600.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170110080035587_A1_300x600_image2.jpg";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_Image_160x600 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_Image_160x600.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_Image_160x600.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170110080026791_A1_160x600_image2.jpg";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_Image_728x90 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_Image_728x90.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame2_Image_728x90.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170110080043999_A1_728x90_image2.jpg";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_Copy = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_300x250_Copy_CSS_Class = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_300x600_Copy_CSS_Class = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_160x600_Copy_CSS_Class = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_728x90_Copy_CSS_Class = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_SplitText_Target1 = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_SplitText_Action1 = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_SplitText_Target2 = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_SplitText_Action2 = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_Image_300x250 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_Image_300x250.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_Image_300x250.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170109124530955_Blank_300x250.png";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_Image_300x600 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_Image_300x600.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_Image_300x600.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170110092621448_Blank_300x600.png";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_Image_160x600 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_Image_160x600.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_Image_160x600.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170110092616112_Blank_160x600.png";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_Image_728x90 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_Image_728x90.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame3_Image_728x90.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170110092627192_Blank_728x90.png";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_Copy = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_300x250_Copy_CSS_Class = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_300x600_Copy_CSS_Class = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_160x600_Copy_CSS_Class = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_728x90_Copy_CSS_Class = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_SplitText_Target1 = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_SplitText_Action1 = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_SplitText_Target2 = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_SplitText_Action2 = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_Image_300x250 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_Image_300x250.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_Image_300x250.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170109124530955_Blank_300x250.png";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_Image_300x600 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_Image_300x600.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_Image_300x600.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170110092621448_Blank_300x600.png";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_Image_160x600 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_Image_160x600.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_Image_160x600.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170110092616112_Blank_160x600.png";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_Image_728x90 = {};
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_Image_728x90.Type = "file";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].Frame4_Image_728x90.Url = "https://s0.2mdn.net/ads/richmedia/studio/37231879/37231879_20170110092627192_Blank_728x90.png";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].End_Frame_Copy1 = "<span class=\"mediumFont\">Safe drivers<\/span><br>save 45%";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].End_Frame_300x250_Copy1_CSS = "largeFont tightLeading txtBlue";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].End_Frame_300x600_Copy1_CSS = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].End_Frame_160x600_Copy1_CSS = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].End_Frame_728x90_Copy1_CSS = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].End_Frame_Copy2 = "or more with Allstate";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].End_Frame_300x250_Copy2_CSS = "txtWhite marginTop smallFont lowercase";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].End_Frame_300x600_Copy2_CSS = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].End_Frame_160x600_Copy2_CSS = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].End_Frame_728x90_Copy2_CSS = "";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].End_Frame_CTA_Copy = "QUOTE NOW";
    devDynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0].End_Frame_CTA_Color = "logoPink";
    Enabler.setDevDynamicContent(devDynamicContent);





/**
 * You may access the variables in the following manner
 * AFTER the Studio Enabler is initialized.
 * var ID = dynamicContent.Allstate_National_Feed__2017_Allstate_National_Feed[0].ID;
 * Note: be sure to use "dynamicContent", not "devDynamicContent"
 * Note: be sure to use ExitOverride to create your exit URL dynamically; follow the instructions on our Help center: https://support.google.com/richmedia/answer/2664807
*/

var asApp = {};
asApp.type = {};
asApp.type.A1 = 'A1';
asApp.type.A2 = 'A2';
asApp.type.A3 = 'A3';
asApp.type.H1 = 'H1';
asApp.type.H2 = 'H2';
asApp.type.H3 = 'H3';
asApp.type.S1 = 'S1';
asApp.type.S2 = 'S2';
asApp.type.S3 = 'S3';
asApp.type.DF = 'DF';

if (!Enabler.isInitialized()) {
  Enabler.addEventListener(
    studio.events.StudioEvent.INIT,
    enablerInitialized);
} else {
  enablerInitialized();
}

function enablerInitialized() {
  // Enabler initialized.
  // In App ads are rendered offscreen so animation should wait for
  // the visible event. These are simulated with delays in the local
  // environment.
  if (!Enabler.isVisible()) {
    Enabler.addEventListener(
      studio.events.StudioEvent.VISIBLE,
      asApp.init);
  } else {
    asApp.init();
  }

    /*******************************************************************************
         Start of Adometry Tag for DoubleClick Dynamic Creatives: DO NOT REMOVE.
         Append this entire block to enablerInitHandler(), ONLY AFTER executing
         Enabler.setDevDynamicContent(devDynamicContent).  Be sure to set 'nid'
         below according to your Adometry account ID.
         
         nid = Adometry account id, pid = DCM placement id, cid = dynamic element ID 
    ********************************************************************************/

    var nid=3700;
    var pid=(function(){p=Enabler.getDartPageId();if(!isNaN(p))return p;else return 0})();
    var cid=(function(){s='';d=dynamicContent;for(x in d){if(x!='_profileid')s+=(d[x][0].elemType+d[x][0].ID);}for(var h=0,i=0;i<s.length;i++)h=h*31+s.charCodeAt(i);return h&0x7FFFFFFF})();
    var str='https://js.dmtry.com/antenna2.js?0_'+nid+'_'+pid+'_'+cid;
    console.log(str);
    var script=document.createElement('script');
    script.src = str;
    document.body.appendChild(script);

   /*******************************************************************************
         End Adometry Tag for DoubleClick Dynamic Creatives: DO NOT REMOVE. 
   ********************************************************************************/
} //end function enabler init();

/**
 * This function is called when the Enabler is initialized.
 * Uses dynamic content to determine which variation to display
 *
 */

asApp.init = function() {
  var dbDefaultPath = dynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0];
  console.info('asApp.init(); Variation Code: ' + dbDefaultPath.Variation);

  //oc: store the ad variation type for easy retrieval
  asApp.variation = dbDefaultPath.Variation;

  //oc: Step 1: map dynamic values to elements in markup
  asApp.parseDynamicContent();

  //oc: Step 2: Add Legal text behavior
  buildLegal();

  //oc: Step 3: config split text
  asApp.splitText();

  //oc: Step 4: Init TimelineLite, defaults to paused.
  tl = new TimelineLite({
    paused: 'true'
  });

  //oc: Step 5: handle variations independently.
  switch (dbDefaultPath.Variation) { //oc: hardcode variation for dev line 16
    case asApp.type.A1:
      console.log('Run A1 Variation');
      asApp.defaultInit();
      break;

    case asApp.type.A2:
      console.log('Run A2 Variation');
      asApp.defaultInit();
      break;

    case asApp.type.A3:
      console.log('Run A3 Variation');
      asApp.defaultInit();
      break;

    case asApp.type.H1:
      console.log('Run H1 Variation');
      asApp.defaultInit();
      break;

    case asApp.type.H2:
      console.log('Run H2 Variation');
      asApp.twoFrameInit();
      break;

    case asApp.type.H3:
      console.log('Run H3 Variation');
      asApp.defaultInit();
      break;

    case asApp.type.S1:
      console.log('Run S1 Variation');
      asApp.fourFrameInit();
      break;

    case asApp.type.S2:
      console.log('Run S2 Variation');
      asApp.defaultInit();
      break;

    case asApp.type.S3:
      console.log('Run S3 Variation');
      asApp.defaultInit();
      break;

    default:
      console.log('Run default ad');
      asApp.defaultInit();
      break;
  } //end switch


  //oc: Google Fonts Fix.
  TweenLite.set("#atAd300x250", {
    visibility: "visible"
  });

  //oc: hide the loader
  $('#loader').hide();

  //oc: Step 6: kick off our timeline!
  tl.play();

}; //end asApp.init




/**
  * This function takes the dynamic data served to the create 
  * and maps it to the corresponding HTMLElement
  * 
  */
asApp.parseDynamicContent = function(){
var dbDefaultPath = dynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0]; 
  console.info('asApp.parseDynamicContent()');

  //Set bg color
document.getElementById("atAd300x250").className += dbDefaultPath.Background_CSS_Class;
document.getElementById("bkgColor").className += dbDefaultPath.Background_CSS_Class;

  //Set logo
var logo = dbDefaultPath.Logo;
if (logo == 'home') {
    document.getElementById('Allstate_home').style.display = 'block';
    } else {
  document.getElementById('Allstate').style.display = 'block';
}

console.log(logo)


  //Map Images
  var img1 = document.getElementById('img1');
  img1.src = dbDefaultPath.Frame1_Image_300x250.Url;
  var img2 = document.getElementById('img2');
  img2.src = dbDefaultPath.Frame2_Image_300x250.Url;
  var img3 = document.getElementById('img3');
  img3.src = dbDefaultPath.Frame3_Image_300x250.Url;
  console.log(img3)


  var c = document.getElementById("aAd_legalTxt"),
    A = dbDefaultPath.Legal_Copy;

 //cw: Set legal copy
  var legalCopy = document.getElementById('aAd_legalTxt');
  legalCopy.innerHTML = dbDefaultPath.Legal_Copy;   

  //Set Frame1 copy
  var frame1Copy = document.getElementById('frame1');
  frame1Copy.innerHTML = dbDefaultPath.Frame1_Copy; 

   //Set Frame2 copy
  var frame2Copy = document.getElementById('frame2');
  frame2Copy.innerHTML = dbDefaultPath.Frame2_Copy; 

   // Set Frame3 copy
  var frame3Copy = document.getElementById('frame3');
  frame3Copy.innerHTML = dbDefaultPath.Frame3_Copy; 

   // Set landing copy
  var landingCopy = document.getElementById('landingCopy1');
  landingCopy.innerHTML = dbDefaultPath.End_Frame_Copy1; 

  // Set landing2 copy
  var landing2Copy = document.getElementById('landingCopy2');
  landing2Copy.innerHTML = dbDefaultPath.End_Frame_Copy2; 

  // Set CTA copy
  var ctaText = document.getElementById('ctaText');
  ctaText.innerHTML = dbDefaultPath.End_Frame_CTA_Copy; 
  $("#ctaArrow").attr('class', dbDefaultPath.End_Frame_CTA_Color);

}; //end asApp.parseDynamicContent() function


/**
  * This function splits the text so each word can by styled/animated
  */
asApp.splitText = function() {
var dbDefaultPath = dynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0]; 
  //oc: only include current variation's divs in the Split Text call.
  var frame1Selector = ' .frame1'; //'#' + dbDefaultPath.Variation +
  var frame2Selector = ' .frame2';
  var frame3Selector = ' .frame3';
  console.log('frame1Selector:' + frame1Selector);


  //oc: only split what we have to and in the right way.
  switch (dbDefaultPath.Variation) {
    case asApp.type.A1:
      document.getElementById("frame1").className += 'right ';
      document.getElementById("frame2").className += 'right ';

      var frame1Selector = ' #frame1'; //'#' + dbDefaultPath.Variation +
      var frame2Selector = ' #frame2';
      
      frame1 = new SplitText(frame1Selector, {
        type: "lines,words,chars",
        linesClass: "line++",
        wordsClass: "word++",
        charsClass: "chars++"
      });

      frame2 = new SplitText(frame2Selector, {
        type: "lines,words,chars",
        linesClass: "line++",
        wordsClass: "word++",
        charsClass: "chars++"
      });

      document.getElementById("frame1").className += dbDefaultPath.Frame1_300x250_Copy_CSS_Class;
      document.getElementById("frame2").className += dbDefaultPath.Frame2_300x250_Copy_CSS_Class;
      document.getElementById("landingCopy1").className += dbDefaultPath.End_Frame_300x250_Copy1_CSS;
      document.getElementById("landingCopy2").className += dbDefaultPath.End_Frame_300x250_Copy2_CSS;
      break;

      case asApp.type.H2:
      var frame1Selector = ' #frame1'; //'#' + dbDefaultPath.Variation +
      
      frame1 = new SplitText(frame1Selector, {
        type: "lines,words,chars",
        linesClass: "line++",
        wordsClass: "word++",
        charsClass: "chars++"
      });

      document.getElementById("frame1").className += dbDefaultPath.Frame1_300x250_Copy_CSS_Class;
      document.getElementById("landingCopy1").className += dbDefaultPath.End_Frame_300x250_Copy1_CSS;
      document.getElementById("landingCopy2").className += dbDefaultPath.End_Frame_300x250_Copy2_CSS;
      break;

      case asApp.type.S1:
      var frame1Selector = ' #frame1'; //'#' + dbDefaultPath.Variation + '
      var frame2Selector = ' #frame2';
      var frame3Selector = ' #frame3';
      
      frame1 = new SplitText(frame1Selector, {
        type: "lines,words,chars",
        linesClass: "line++",
        wordsClass: "word++",
        charsClass: "chars++"
      });

      frame2 = new SplitText(frame2Selector, {
        type: "lines,words,chars",
        linesClass: "line++",
        wordsClass: "word++",
        charsClass: "chars++"
      });

       frame3 = new SplitText(frame3Selector, {
        type: "lines,words,chars",
        linesClass: "line++",
        wordsClass: "word++",
        charsClass: "chars++"
      });

      document.getElementById("frame1").className += dbDefaultPath.Frame1_300x250_Copy_CSS_Class;
      document.getElementById("frame2").className += dbDefaultPath.Frame2_300x250_Copy_CSS_Class;
      document.getElementById("frame3").className += dbDefaultPath.Frame3_300x250_Copy_CSS_Class;
      document.getElementById("landingCopy1").className += dbDefaultPath.End_Frame_300x250_Copy1_CSS;
      document.getElementById("landingCopy2").className += dbDefaultPath.End_Frame_300x250_Copy2_CSS;
      break;

      case asApp.type.A2:
        var frame1Selector = ' #frame1'; //'#' + dbDefaultPath.Variation +
        var frame2Selector = ' #frame2';

        frame1 = new SplitText(frame1Selector, {
          type: "lines,words,chars",
          linesClass: "line++",
          wordsClass: "word++",
          charsClass: "chars++"
        });

        frame2 = new SplitText(frame2Selector, {
          type: "lines,words,chars",
          linesClass: "line++",
          wordsClass: "word++",
          charsClass: "chars++"
        });

        document.getElementById("frame1").className += dbDefaultPath.Frame1_300x250_Copy_CSS_Class;
        document.getElementById("frame2").className += dbDefaultPath.Frame2_300x250_Copy_CSS_Class;
        document.getElementById("landingCopy1").className += dbDefaultPath.End_Frame_300x250_Copy1_CSS;
        document.getElementById("landingCopy2").className += dbDefaultPath.End_Frame_300x250_Copy2_CSS;
        break;
      case asApp.type.A3:
      case asApp.type.H1:
      case asApp.type.H3:
      case asApp.type.S2:
      case asApp.type.S3:
      var frame1Selector = ' #frame1'; //'#' + dbDefaultPath.Variation +
      var frame2Selector = ' #frame2';

      frame1 = new SplitText(frame1Selector, {
        type: "lines,words,chars",
        linesClass: "line++",
        wordsClass: "word++",
        charsClass: "chars++"
      });

      frame2 = new SplitText(frame2Selector, {
        type: "lines,words,chars",
        linesClass: "line++",
        wordsClass: "word++",
        charsClass: "chars++"
      });

      document.getElementById("frame1").className += dbDefaultPath.Frame1_300x250_Copy_CSS_Class;
      document.getElementById("frame2").className += dbDefaultPath.Frame2_300x250_Copy_CSS_Class;
      document.getElementById("landingCopy1").className += dbDefaultPath.End_Frame_300x250_Copy1_CSS;
      document.getElementById("landingCopy2").className += dbDefaultPath.End_Frame_300x250_Copy2_CSS;
      break;

      case asApp.type.ZZ:
      var frame1Selector = ' #frame1'; //'#' + dbDefaultPath.Variation +
      var frame2Selector = ' #frame2';
      var frame3Selector = ' #frame3';
      var frame4Selector = ' #frame4';
      
      frame1 = new SplitText(frame1Selector, {
        type: "lines,words,chars",
        linesClass: "line++",
        wordsClass: "word++",
        charsClass: "chars++"
      });

      frame2 = new SplitText(frame2Selector, {
        type: "lines,words,chars",
        linesClass: "line++",
        wordsClass: "word++",
        charsClass: "chars++"
      });

       frame3 = new SplitText(frame3Selector, {
        type: "lines,words,chars",
        linesClass: "line++",
        wordsClass: "word++",
        charsClass: "chars++"
      });

       frame4 = new SplitText(frame4Selector, {
        type: "lines,words,chars",
        linesClass: "line++",
        wordsClass: "word++",
        charsClass: "chars++"
      });



      document.getElementById("frame1").className += dbDefaultPath.Frame1_300x250_Copy_CSS_Class;
      document.getElementById("frame2").className += dbDefaultPath.Frame2_300x250_Copy_CSS_Class;
      document.getElementById("frame3").className += dbDefaultPath.Frame3_300x250_Copy_CSS_Class;
      document.getElementById("frame4").className += dbDefaultPath.Frame3_300x250_Copy_CSS_Class;
      document.getElementById("landingCopy1").className += dbDefaultPath.End_Frame_300x250_Copy1_CSS;
      document.getElementById("landingCopy2").className += dbDefaultPath.End_Frame_300x250_Copy2_CSS;
      break;
    
  } //end switch


};

asApp.addFrame1CopyColor1ToTimeline = function() {
    var dbDefaultPath = dynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0];
    // USE FOR CHANGING TEXT COLOR
    var splitTextTargetValue = '$("' + dbDefaultPath.Frame1_SplitText_Target1 + '").attr('; //feedSplitTextTarget - from the feed
    var splitTextClassValue = '"class","' + dbDefaultPath.Frame1_SplitText_Action1 + '")'; // feedSplitTextAction - from the feed
    eval(splitTextTargetValue + splitTextClassValue);
    // END FOR CHANGING TEXT COLOR
};

asApp.addFrame1CopyColor2ToTimeline = function() {
    var dbDefaultPath = dynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0];
    // USE FOR CHANGING TEXT COLOR
    var splitTextTargetValue = '$("' + dbDefaultPath.Frame1_SplitText_Target2 + '").attr('; //feedSplitTextTarget - from the feed
    var splitTextClassValue = '"class","' + dbDefaultPath.Frame1_SplitText_Action2 + '")'; // feedSplitTextAction - from the feed
    eval(splitTextTargetValue + splitTextClassValue);
    // END FOR CHANGING TEXT COLOR
};


asApp.addFrame2CopyColor1ToTimeline = function() {
    var dbDefaultPath = dynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0];
    // USE FOR CHANGING TEXT COLOR
    var splitTextTargetValue = '$("' + dbDefaultPath.Frame2_SplitText_Target1 + '").attr('; //feedSplitTextTarget - from the feed
    var splitTextClassValue = '"class","' + dbDefaultPath.Frame2_SplitText_Action1 + '")'; // feedSplitTextAction - from the feed
    eval(splitTextTargetValue + splitTextClassValue);
    // END FOR CHANGING TEXT COLOR
};

asApp.addFrame2CopyColor2ToTimeline = function() {
    var dbDefaultPath = dynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0];
    // USE FOR CHANGING TEXT COLOR
    var splitTextTargetValue = '$("' + dbDefaultPath.Frame2_SplitText_Target2 + '").attr('; //feedSplitTextTarget - from the feed
    var splitTextClassValue = '"class","' + dbDefaultPath.Frame2_SplitText_Action2 + '")'; // feedSplitTextAction - from the feed
    eval(splitTextTargetValue + splitTextClassValue);
    // END FOR CHANGING TEXT COLOR
    console.log(splitTextTargetValue + splitTextClassValue)
};

asApp.addFrame3CopyColor1ToTimeline = function() {
    var dbDefaultPath = dynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0];
    // USE FOR CHANGING TEXT COLOR
    var splitTextTargetValue = '$("' + dbDefaultPath.Frame3_SplitText_Target1 + '").attr('; //feedSplitTextTarget - from the feed
    var splitTextClassValue = '"class","' + dbDefaultPath.Frame3_SplitText_Action1 + '")'; // feedSplitTextAction - from the feed
    eval(splitTextTargetValue + splitTextClassValue);
    // END FOR CHANGING TEXT COLOR
};

asApp.addFrame3CopyColor2ToTimeline = function() {
    var dbDefaultPath = dynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0];
    // USE FOR CHANGING TEXT COLOR
    var splitTextTargetValue = '$("' + dbDefaultPath.Frame3_SplitText_Target2 + '").attr('; //feedSplitTextTarget - from the feed
    var splitTextClassValue = '"class","' + dbDefaultPath.Frame3_SplitText_Action2 + '")'; // feedSplitTextAction - from the feed
    eval(splitTextTargetValue + splitTextClassValue);
    // END FOR CHANGING TEXT COLOR
};

asApp.addFrame4CopyColor1ToTimeline = function() {
    var dbDefaultPath = dynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0];
    // USE FOR CHANGING TEXT COLOR
    var splitTextTargetValue = '$("' + dbDefaultPath.Frame4_SplitText_Target1 + '").attr('; //feedSplitTextTarget - from the feed
    var splitTextClassValue = '"class","' + dbDefaultPath.Frame4_SplitText_Action1 + '")'; // feedSplitTextAction - from the feed
    eval(splitTextTargetValue + splitTextClassValue);
    // END FOR CHANGING TEXT COLOR
};

asApp.addFrame4CopyColor2ToTimeline = function() {
    var dbDefaultPath = dynamicContent.Allstate_National_Feed__2017_Final_Allstate_National_Feed[0];
    // USE FOR CHANGING TEXT COLOR
    var splitTextTargetValue = '$("' + dbDefaultPath.Frame4_SplitText_Target2 + '").attr('; //feedSplitTextTarget - from the feed
    var splitTextClassValue = '"class","' + dbDefaultPath.Frame4_SplitText_Action2 + '")'; // feedSplitTextAction - from the feed
    eval(splitTextTargetValue + splitTextClassValue);
    // END FOR CHANGING TEXT COLOR
};



asApp.addGet1ImageFrameToTimeline = function(){
  tl.staggerFrom(frame1.lines, 0.2, {
        left: -300,
        delay:0.5
    }, 0.07)

};

asApp.addGet2ImageFrameToTimeline = function(){
  tl.staggerFrom(frame1.lines, 0.2, {
        left: -300,
        delay:0.5
    }, 0.07)

  tl.to("#frame1", 0.3, {
        autoAlpha: 0,
        delay:2
    });


    tl.to("#bgImg2", 0.3, {
        autoAlpha: 1,
    });

    tl.staggerFrom(frame2.lines, 0.2, {
        left: -300,
        delay:0.5
    }, 0.07)

};

asApp.addGet3ImageFrameToTimeline = function(){
  tl.staggerFrom(frame1.lines, 0.2, {
        left: -300,
        delay:0.5
    }, 0.07)

  tl.to("#frame1", 0.3, {
        autoAlpha: 0,
        delay:2
    });

    tl.to("#bgImg2", 0.3, {
        autoAlpha: 1,
    });

    tl.staggerFrom(frame2.lines, 0.2, {
        left: -300,
        delay:0.5
    }, 0.07)

    tl.to("#frame2", 0.3, {
        autoAlpha: 0,
        delay:2
    });

    tl.to("#bgImg3", 0.3, {
        autoAlpha: 1,
    });

    tl.staggerFrom(frame3.lines, 0.2, {
        left: -300,
        delay:0.5
    }, 0.07)

   
};

asApp.addLandingToTimeline = function(){
    tl.to("#bkgColor", 0.3, {
        autoAlpha: 1,
        delay:2
    });

   tl.to("#landing", 0.3, {
        autoAlpha: 1,
    });

   tl.to("#landingCopy1", 0.3, {
        autoAlpha: 1,
    });

   tl.to("#landingCopy2", 0.3, {
        autoAlpha: 1,
    });

};

asApp.addCTAToTimeline = function() {
    tl.to("#btn_cta", 0.3, {
        right: -10,
        autoAlpha: 1
    });

    tl.to("#btn_cta", 0.3, {
        right: -20,
        repeat: 2,
        yoyo: true,
        ease: Linear.easeNone
    });

    var div1 = $("div#btn_cta"),
        tn1 = TweenMax.to(div1, .3, {
            right: -10,
            repeat: -1,
            yoyo: true,
            ease: Linear.easeNone,
            paused: true
        });

    div1.mouseenter(function() {
        tn1.play();
    });

    div1.mouseleave(function() {
        var currentTime = tn1.time();
        tn1.reverse(currentTime);
    });

};



asApp.defaultInit = function() {
    asApp.addFrame1CopyColor1ToTimeline();
    asApp.addFrame1CopyColor2ToTimeline();
    asApp.addFrame2CopyColor1ToTimeline();
    asApp.addFrame2CopyColor2ToTimeline();
    asApp.addGet2ImageFrameToTimeline();
    asApp.addLandingToTimeline();
    asApp.addCTAToTimeline();
}


asApp.twoFrameInit = function() {
    asApp.addFrame1CopyColor1ToTimeline();
    asApp.addFrame1CopyColor2ToTimeline();
    asApp.addGet1ImageFrameToTimeline();
    asApp.addLandingToTimeline();
    asApp.addCTAToTimeline();
}

asApp.fourFrameInit = function() {
    asApp.addFrame1CopyColor1ToTimeline();
    asApp.addFrame1CopyColor2ToTimeline();
    asApp.addFrame2CopyColor1ToTimeline();
    asApp.addFrame2CopyColor2ToTimeline();
    asApp.addFrame3CopyColor1ToTimeline();
    asApp.addFrame3CopyColor2ToTimeline();
    asApp.addGet3ImageFrameToTimeline();
    asApp.addLandingToTimeline();
    asApp.addCTAToTimeline();
}

asApp.fiveFrameInit = function() {
    asApp.addFrame1CopyColor1ToTimeline();
    asApp.addFrame1CopyColor2ToTimeline();
    asApp.addFrame2CopyColor1ToTimeline();
    asApp.addFrame2CopyColor2ToTimeline();
    asApp.addFrame3CopyColor1ToTimeline();
    asApp.addFrame3CopyColor2ToTimeline();
    asApp.addFrame4CopyColor1ToTimeline();
    asApp.addFrame4CopyColor2ToTimeline();
    asApp.addGet3ImageFrameToTimeline();
    asApp.addLandingToTimeline();
    asApp.addCTAToTimeline();
}






    





    





